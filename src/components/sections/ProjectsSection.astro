---
// ProjectsSection.astro
import "@styles/shared.css";

// Aquí defines manualmente tus proyectos
const projects = [
    {
        name: "Annotation Tool",
        description:
            "Application for labeling objects in images, similar to labelme. Allows you to easily and visually create annotation datasets.",
        image: "/AnnotationTool.jpg",
        language: "TypeScript",
        readmeExcerpt:
            "Web tool for image annotation and dataset generation for computer vision model training.",
        url: "github.com/diconsi/vision-device",
    },
    {
        name: "awesomeHMI",
        description:
            "HMI to display work instructions, process steps, visual aids, help ticket creation, product and material information, and operation times.",
        image: "/awesomeHMI.png",
        language: "TypeScript",
        readmeExcerpt:
            "Interface for control and monitoring of industrial processes, supporting instructions, tickets, and material visualization.",
        url: "",
    },
    {
        name: "clientDashboard",
        description:
            "Dashboard for devices with YOLOv8 models. View device information, upload new trainings, and manage existing models.",
        image: "/clientDashboard.jpg",
        language: "TypeScript",
        readmeExcerpt:
            "Control panel for managing inference models and monitoring edge devices.",
        url: "",
    },
    {
        name: "clientStreaming",
        description:
            "Application to view YOLOv8 model execution and see real-time detections for each camera with inference stream.",
        image: "/clientStreaming.jpg",
        language: "TypeScript",
        readmeExcerpt:
            "Live streaming of inferences and object detections across multiple cameras.",
        url: "",
    },
    // Add more projects here
];
---

<section id="projects" class="relative overflow-hidden">
    <div id="particles-js" class="absolute inset-0 -z-10"></div>
    <div class="container mx-auto px-4">
        <h2 class="section-title mb-16 text-center relative">
            My <span class="gradient-text">Projects</span>
        </h2>
        {
            projects && projects.length > 0 ? (
                <div class="projects-grid">
                    {projects.map((project) => (
                        <div class={`project-item group animated-border`}>
                            <div class="project-card premium-glass-panel relative h-full overflow-hidden">
                                <div class="glass-overlay absolute top-0 left-0 w-full h-full -z-10" />

                                {/* Imagen en posición absoluta */}
                                <div class="project-image-container max-h-[220px] absolute left-0 w-full h-[220px] pt-0 overflow-hidden transition-opacity duration-300 ease-out">
                                    <img
                                        src={project.image}
                                        alt={project.name + " preview"}
                                        class="project-image w-full h-full opacity-60 object-cover transition-opacity duration-300 ease-out group-hover:opacity-100"
                                    />
                                </div>

                                {/* El contenido textual ahora siempre es visible, pero con animación de color y sombra al hover */}
                                <div class="project-content relative z-20 flex flex-col items-center pt-[220px] px-6 pb-6 transition-all duration-500 group-hover:text-white group-hover:drop-shadow-xl ">
                                    <h3 class="text-2xl font-extrabold mb-2 mt-4 project-title text-white drop-shadow-lg transition-all duration-500 group-hover:text-white group-hover:drop-shadow-2xl">
                                        {project.name}
                                    </h3>
                                    <p class="mb-3 text-base font-medium project-description text-slate-200 drop-shadow transition-all duration-500 group-hover:text-white group-hover:drop-shadow-2xl">
                                        {project.description}
                                    </p>
                                    <div class="project-footer mt-4 w-full flex justify-between items-center">
                                        {project.language && (
                                            <span class="lang-badge transition-all duration-500 opacity-70 group-hover:opacity-100 group-hover:bg-violet-700 group-hover:text-white">
                                                {project.language}
                                            </span>
                                        )}
                                        {project.url && (
                                            <a
                                                href={project.url}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                class="cta-btn transition-all duration-300 opacity-70 group-hover:opacity-100 px-4 py-1 text-base rounded-lg shadow-sm"
                                                style="font-size: 1rem; padding: 0.4rem 1.2rem; border-radius: 0.75rem; margin-top: 0;"
                                            >
                                                Ver en GitHub
                                            </a>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            ) : (
                <p class="text-center opacity-70">No projects found</p>
            )
        }
    </div>
</section>

<style>
    #particles-js {
        animation: gradient-move 10s infinite alternate;
    }
    @keyframes gradient-move {
        0% {
            background-position: 0% 50%;
        }
        100% {
            background-position: 100% 50%;
        }
    }
    .section-title {
        font-size: 3rem;
        font-weight: 800;
        letter-spacing: -0.05em;
        text-shadow: 0 0 30px rgba(147, 51, 234, 0.5);
        padding-bottom: 1rem;
    }
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }
    .project-item {
        position: relative;
        border-radius: 1.5rem;
        overflow: hidden;
        transition:
            transform 0.4s cubic-bezier(0.4, 2, 0.3, 1),
            box-shadow 0.4s cubic-bezier(0.4, 2, 0.3, 1);
        box-shadow: 0 2px 16px 0 rgba(80, 60, 180, 0.1);
        background: transparent;
    }
    .project-item:hover {
        box-shadow:
            0 12px 40px 0 rgba(147, 51, 234, 0.18),
            0 2px 16px 0 rgba(80, 60, 180, 0.1);
        z-index: 2;
    }
    .cta-btn {
        background: linear-gradient(90deg, #9333ea 0%, #3b82f6 100%);
        color: #fff;
        font-weight: 700;
        padding: 0.75rem 2rem;
        border-radius: 9999px;
        font-size: 1.1rem;
        box-shadow: 0 4px 24px 0 #9333ea44;
        text-shadow: 0 2px 8px #0008;
        transition:
            background 0.3s,
            transform 0.3s;
        border: none;
        outline: none;
        cursor: pointer;
        margin-top: 1rem;
        /* animation and transform/opacity are not needed as you handle with inline style and group-hover */
    }
    .group:hover .cta-btn {
        background: linear-gradient(90deg, #3b82f6 0%, #9333ea 100%);
    }
    .project-card {
        border: 2px solid rgba(147, 51, 234, 0.13);
        border-radius: 1.5rem;
        padding: 0;
        height: 100%;
        display: flex;
        flex-direction: column;
        background: linear-gradient(
            135deg,
            rgba(36, 33, 70, 0.95) 80%,
            rgba(147, 51, 234, 0.08) 100%
        );
        backdrop-filter: blur(12px);
        box-shadow: 0 2px 16px 0 rgba(80, 60, 180, 0.1);
        transition:
            border-color 0.3s,
            box-shadow 0.3s,
            filter 0.5s;
        position: relative;
    }
    .project-item:hover .project-card {
        border-color: #9333ea;
        box-shadow:
            0 0 32px 0 #9333ea55,
            0 12px 40px 0 rgba(147, 51, 234, 0.18),
            0 2px 16px 0 rgba(80, 60, 180, 0.1);
        filter: drop-shadow(0 0 24px #9333ea88);
    }
    .project-title {
        color: #fff;
        text-shadow:
            0 2px 8px #000,
            0 1px 2px #9333ea44;
        letter-spacing: -0.01em;
        word-break: break-word;
        transition: color 0.3s;
    }
    .project-description {
        color: #e0e7ff;
        font-weight: 500;
        text-shadow: 0 1px 2px #1e1b4b44;
        margin-bottom: 0.5rem;
        min-height: 2.5em;
    }
    .project-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
        padding-top: 1rem;
    }
    .lang-badge {
        background: linear-gradient(
            90deg,
            rgba(147, 51, 234, 0.18) 0%,
            rgba(30, 27, 75, 0.18) 100%
        );
        color: #c084fc;
        padding: 0.45rem 1.1rem;
        border-radius: 9999px;
        font-size: 0.92rem;
        font-weight: 700;
        border: 1px solid rgba(147, 51, 234, 0.22);
        box-shadow: 0 1px 4px 0 rgba(80, 60, 180, 0.08);
        transition: all 0.3s;
    }
    .project-image {
        border-radius: 1.5rem 1.5rem 0 0;
        pointer-events: none;
        transition: opacity 0.5s ease-out;
    }
    .project-item:hover .project-image {
        filter: none;
    }
    .project-image-container {
        z-index: 5;
        border-radius: 1.5rem 1.5rem 0 0;
        overflow: hidden;
        will-change: opacity;
    }
</style>
